<html lang="en"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="Sergey Pozhilov (GetTemplate.com)">
	
	<title>Vijayaragavan C</title>

	<link rel="shortcut icon" href="assets/images/aws.jpg">
	
	<!-- Bootstrap -->
	<link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css" rel="stylesheet">
	<!-- Icon font -->
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	<!-- Fonts -->
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700">
	<!-- Custom styles -->
	<link rel="stylesheet" href="assets/css/styles.css">

	<!--[if lt IE 9]> <script src="assets/js/html5shiv.js"></script> <![endif]-->
</head>
<body style="">

<header id="header">
	<div id="head" class="parallax" parallax-speed="1">
		<h1 id="logo" class="text-center">
			<img class="img-circle" src="assets/images/aws1.jpg" alt="">
			<span class="title">Vijayaragavan C</span>
			<span class="tagline">AWS - Windows - Linux</span>
			<span class="tagline"></span>
		</h1>
	</div>

	<nav class="navbar navbar-default navbar-sticky">
		<div class="container-fluid">
			
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
			</div>
			
			<div class="navbar-collapse collapse">
				
				<ul class="nav navbar-nav">
					<li><a href="index.html">Home</a></li>
					<li><a href="About.html">About</a></li>
					<!--<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">More Pages <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="sidebar-left.html">Left Sidebar</a></li>
							<li><a href="sidebar-right.html">Right Sidebar</a></li>
							<li><a href="single.html">Blog Post</a></li>
						</ul>
					</li>-->
					<li class="active"><a href="Contact.html">Contact</a></li>
				</ul>
			
			</div><!--/.nav-collapse -->			
		</div>	
	</nav>
</header>

<main id="main">

	<div class="container">
	
	<h3 class="widget-title">Stop and Start Amazon EC2 instances automatically using Lambda and CloudWatch to reduce my Amazon Elastic Compute Cloud (Amazon EC2) usage</h3>
<a href="assets/images/stopstart.jpg" class="gal"><img src="assets/images/stopstart.jpg" alt=""></a>
<br>
<br>	
<p><strong>Step 1:</strong> Go to IAM service on AWS Console and create a IAM Role.</p>
<a href="assets/images/aws/startstop/image001.jpg" class="gal"><img src="assets/images/aws/startstop/image001.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 2:</strong> Click Role.</p>
<a href="assets/images/aws/startstop/image002.jpg" class="gal"><img src="assets/images/aws/startstop/image002.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 3:</strong> Click Create Role.</p>
<a href="assets/images/aws/startstop/image003.jpg" class="gal"><img src="assets/images/aws/startstop/image003.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 4:</strong> Choose the lambda service.Click Next.</p>
<a href="assets/images/aws/startstop/image004.jpg" class="gal"><img src="assets/images/aws/startstop/image004.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 5:</strong> Click Create Policy.</p>
<a href="assets/images/aws/startstop/image005.jpg" class="gal"><img src="assets/images/aws/startstop/image005.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 6:</strong> Choose the view policy document editor as JSON and give the policy. Click Review Policy.</p>
<a href="assets/images/aws/startstop/image006.jpg" class="gal"><img src="assets/images/aws/startstop/image006.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 7:</strong> Give the Tag Name. Click Create Policy.</p>
<a href="assets/images/aws/startstop/image007.jpg" class="gal"><img src="assets/images/aws/startstop/image007.jpg" alt=""></a>
<br>
<br>
<a href="assets/images/aws/startstop/image008.jpg" class="gal"><img src="assets/images/aws/startstop/image008.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 8:</strong> Role has been created as per the below.</p>
<a href="assets/images/aws/startstop/image009.jpg" class="gal"><img src="assets/images/aws/startstop/image009.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 9:</strong> Go to the lambda service on AWS Console.</p>
<a href="assets/images/aws/startstop/image010.jpg" class="gal"><img src="assets/images/aws/startstop/image010.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 10:</strong> Click Create a function.</p>
<a href="assets/images/aws/startstop/image011.jpg" class="gal"><img src="assets/images/aws/startstop/image011.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 11:</strong> Choose Author from scratch.</p>
<a href="assets/images/aws/startstop/image012.jpg" class="gal"><img src="assets/images/aws/startstop/image012.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 12:</strong> Enter the function Name as StopsEC2Instances and choose the Runtime as Python2.7 and select the exist IAM role that we created. Click Create function.</p>
<a href="assets/images/aws/startstop/image013.jpg" class="gal"><img src="assets/images/aws/startstop/image013.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 13:</strong> Once created the function just scroll down and write the code and mention the instance id,region under the edit pane in the code editor to Stop the instance. Click Save</p>
<a href="assets/images/aws/startstop/image014.jpg" class="gal"><img src="assets/images/aws/startstop/image014.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 14:</strong> You can understand that, I mentioned the below instance ID in above code editor.</p>
<a href="assets/images/aws/startstop/image015.jpg" class="gal"><img src="assets/images/aws/startstop/image015.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 15:</strong> Repeat steps 10-12 to create another function to start your instance. So that function name should be as <strong>StartEC2Instances</strong> for your understanding and choose the same role we created previously.Here you write the different code into editor pane in the code editor for startup the instance. Click Save.</p>
<a href="assets/images/aws/startstop/image016.jpg" class="gal"><img src="assets/images/aws/startstop/image016.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 16:</strong> Go to the lambda functions and choose one of the functions we created to test our lambda functions.</p>
<a href="assets/images/aws/startstop/image017.jpg" class="gal"><img src="assets/images/aws/startstop/image017.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 17:</strong> Click Test.</p>
<a href="assets/images/aws/startstop/image018.jpg" class="gal"><img src="assets/images/aws/startstop/image018.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 18:</strong> In the Configure test event dialog, choose Create new test event and Enter an Event name, and then choose Create. Click Create.<br>
<strong>Note:</strong> You don't need to change the JSON code for the test eventâ€”the function doesn't use it.
</p>
<a href="assets/images/aws/startstop/image019.jpg" class="gal"><img src="assets/images/aws/startstop/image019.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 19:</strong> Again Click Test and you can see the below code was executed successfully.</p>
<a href="assets/images/aws/startstop/image020.jpg" class="gal"><img src="assets/images/aws/startstop/image020.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 20:</strong> Go to CloudWatch service and Create a CloudWatch Events event that triggers a Lambda functions.</p>
<a href="assets/images/aws/startstop/image021.jpg" class="gal"><img src="assets/images/aws/startstop/image021.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 21:</strong> Click Events.</p>
<a href="assets/images/aws/startstop/image022.jpg" class="gal"><img src="assets/images/aws/startstop/image022.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 22:</strong> Click Get started.</p>
<a href="assets/images/aws/startstop/image023.jpg" class="gal"><img src="assets/images/aws/startstop/image023.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 23:</strong>Under Event Source, choose Schedule and Cron expression and enter an expression that tells Lambda when to stop your instances.</p>
<a href="assets/images/aws/startstop/image024.jpg" class="gal"><img src="assets/images/aws/startstop/image024.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 24:</strong> Under Targets, Click Add target and choose your lambda function. Click Configure details.</p>
<a href="assets/images/aws/startstop/image025.jpg" class="gal"><img src="assets/images/aws/startstop/image025.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 25:</strong> Enter a name to identify the event and select Enabled check box. Click Create rule.</p>
<a href="assets/images/aws/startstop/image026.jpg" class="gal"><img src="assets/images/aws/startstop/image026.jpg" alt=""></a>
<br>
<br>
<p><strong>Step 26:</strong> Created one event that stops your EC2 instances and another event that starts them again using another rule. Follow the Step 20 to Step 25 to create a another rule for startup the instance.</p>
<a href="assets/images/aws/startstop/image027.jpg" class="gal"><img src="assets/images/aws/startstop/image027.jpg" alt=""></a>
	
	
	

	
	
	
	





						
						
						
			

				</div>
			
		 <!-- /row comments -->
		<div class="clearfix"></div>

		<!-- /container -->

</main>

<footer id="footer" class="topspace">
	<div class="container">
		<div class="row">
			<div class="col-md-3 widget">
				<h3 class="widget-title">Contact</h3>
				<div class="widget-body">
					Vijayaragavan C
					<p>+91 9791558457<br>
						<a href="mailto:#">ragavancv@gmail.com</a><br>
						<br>
						No.3, Hari Avenue, Ganesan Street, Sambantham Nagar, Kundrathure, Chennai - 69, Tamil Nadu, India.
					</p>	
				</div>
			</div>

			<div class="col-md-3 widget">
				<h3 class="widget-title">Follow me</h3>
				<div class="widget-body">
					<p class="follow-me-icons">
						<!--<a href=""><i class="fa fa-twitter fa-2"></i></a>-->
						<a href="https://www.linkedin.com/in/vijayaragavan-c-928b2349/"><i class="fa fa-linkedin fa-2"></i></a>
						
						<a href="https://www.facebook.com/vijaya.r.c.5"><i class="fa fa-facebook fa-2"></i></a>
					</p>
				</div>
			</div>

			

			

		</div> <!-- /row of widgets -->
	</div>
</footer>

<footer id="underfooter">
	<div class="container">
		<div class="row">
			
			<div class="col-md-6 widget">
				<div class="widget-body">
					<p>All Rights Reserved</p>
				</div>
			</div>

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p class="text-right">
						 
						Design: <a href="http://www.cvijay.com" rel="designer">Vijayaragavan C</a> </p>
				</div>
			</div>

		</div> <!-- /row of widgets -->
	</div>
</footer>



<!-- JavaScript libs are placed at the end of the document so the pages load faster -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="assets/js/template.js"></script>


</body></html>